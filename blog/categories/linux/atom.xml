<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Linux | Freelance Projects]]></title>
  <link href="http://uw-freelancer.github.io/blog/categories/linux/atom.xml" rel="self"/>
  <link href="http://uw-freelancer.github.io/"/>
  <updated>2013-07-17T18:06:03+05:30</updated>
  <id>http://uw-freelancer.github.io/</id>
  <author>
    <name><![CDATA[Upeksha Wisidagama]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Building a Linux System From Scratch]]></title>
    <link href="http://uw-freelancer.github.io/blog/building-a-linux-system-from-scratch/"/>
    <updated>2013-07-14T18:00:00+05:30</updated>
    <id>http://uw-freelancer.github.io/blog/building-a-linux-system-from-scratch</id>
    <content type="html"><![CDATA[<p>62 Tarballs were downloaded. Then compiled one-by-one.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>&lsquo;Source Tarballs (/sources)&rsquo; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1214744 Apr 25  2012 autoconf-2.69.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1425080 Jan  1  2013 automake-1.13.1.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    7009201 Feb 14  2011 bash-4.2.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw   21455321 Nov 13  2012 binutils-2.23.1.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1776640 Dec 12  2012 bison-2.7.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     782025 Sep 20  2010 bzip2-1.0.6.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     602679 Oct 22  2012 check-0.9.9.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    5357988 Feb 14 22:36 coreutils-8.21.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     576269 Mar 11  2011 dejagnu-1.5.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    2023539 Sep  2  2011 diffutils-3.2.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    5981006 Jan 22 09:09 e2fsprogs-1.42.7.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     628808 Nov 10  2010 expect5.45.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     641632 Jul 11 10:50 file-5.13.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    2149838 Jun  6  2009 findutils-4.4.2.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1303313 Aug  4  2012 flex-2.5.37.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1626808 Dec 27  2012 gawk-4.0.2.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw   82884636 Sep 20  2012 gcc-4.7.2.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     655599 Nov 13  2011 gdbm-1.10.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw   15697875 Dec 25  2012 gettext-0.18.2.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw   10981956 Dec 26  2012 glibc-2.17.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1812988 Jul 11 20:52 gmp-5.1.1.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1195640 Aug 20  2012 grep-2.14.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    4019913 Feb  7 17:50 groff-1.22.2.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    5136412 Jun 28  2012 grub-2.00.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     720956 Jun 18  2012 gzip-1.5.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     205618 Mar  5  2008 iana-etc-2.30.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1987928 Jan  6  2012 inetutils-1.9.1.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     407608 Feb 21 22:14 iproute2-3.8.0.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1730719 Dec  6  2012 kbd-1.15.5.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1275028 Dec  5  2012 kmod-12.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     310144 Jul 22  2012 less-451.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw      33692 Mar  4 21:17 lfs-bootscripts-20130123.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     750489 Sep 18  2012 libpipeline-1.2.2.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    2632347 Oct 18  2011 libtool-2.4.2.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw   70981756 Feb 28 19:27 linux-3.8.1.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1258362 Mar  2  2011 m4-1.4.16.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1242186 Jul 28  2010 make-3.82.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1388944 Sep 18  2012 man-db-2.6.3.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1134180 Feb 12 09:26 man-pages-3.47.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     624125 Sep  6  2012 mpc-1.0.1.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1071688 Jul  4  2012 mpfr-3.1.1.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    2826473 Jul 11 11:11 ncurses-5.9.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     675896 Sep 28  2012 patch-2.7.1.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw   13725101 Nov  1  2012 perl-5.16.2.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1931203 Jan 24 19:17 pkg-config-0.28.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     535796 Jan  8  2013 procps-ng-3.3.6.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     432501 Sep 20  2012 psmisc-22.20.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    2277926 Feb 14  2011 readline-6.2.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    1059414 Dec 22  2012 sed-4.2.2.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    2193325 May 26  2012 shadow-4.1.5.1.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw      86557 Jul 29  2007 sysklogd-1.5.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    2054644 Jan  8  2013 systemd-197.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     105551 Apr 14  2010 sysvinit-2.88dsf.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    2339773 Mar 12  2011 tar-1.26.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    8636908 Dec 20  2012 tcl8.6.0-src.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    3782636 Feb 17 07:54 texinfo-5.0.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     214075 Jan  5  2013 tzdata2012j.tar.gz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw      17129 Jan 12 00:40 udev-lfs-197-2.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    3100832 Dec 13  2012 util-linux-2.22.2.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw    9080692 Jul 11 11:18 vim-7.3.tar.bz2
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     915048 Jun 22  2012 xz-5.0.4.tar.xz
</span><span class='line'>-rw-r&amp;mdash;r&amp;mdash;  1 uw   uw     505085 Jul 11 19:55 zlib-1.2.7.tar.bz2
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>Building the ToolChain, Building the System Software and Compiling the Linux Kernel</h2>


<p><a href="/blog/building-the-host-independant-toolchain/" >Building the ToolChain</a><br />
<a href="/blog/building-the-system-software-from-scratch/" >Building the System Software</a><br />
<a href="/blog/compiling-the-linux-kernel-from-source/" >Compiling the Linux Kernel</a><br /></p>

<p>The above posts describe the steps needed to build a basic Linux system from source tarballs. This article is about booting and logging into the new system.</p>

<h2>Booting the New Linux System</h2>


<p>Remove the host hard disk. Boot with the hard disk with new system. Or you can change the hard drive order to allow booting from our new disk.</p>

<p><img class='center' src="/images/lfs/lfs-grub-menu.png" title="Linux System Grub Menu" alt="Linux System Grub Menu" /></p>

<p><img class='center' src="/images/lfs/login-to-lfs.png" title="Linux System Login" alt="Linux System Login" /></p>

<h2>Linux System Hard Disk Usage</h2>


<p>The entire disk is 10GB. The system files use only 552MB. &lsquo;usr&rsquo; alone uses 508MB. The Rest of the system uses 44MB.</p>

<table>
<thead>
<tr>
<th></th>
<th> Directory     </th>
<th> Size/KB      </th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td> tmp         </td>
<td> 20</td>
</tr>
<tr>
<td></td>
<td> srv         </td>
<td> 4</td>
</tr>
<tr>
<td></td>
<td> lib         </td>
<td> 15360</td>
</tr>
<tr>
<td></td>
<td> media       </td>
<td> 12</td>
</tr>
<tr>
<td></td>
<td> boot        </td>
<td> 12288</td>
</tr>
<tr>
<td></td>
<td> opt  </td>
<td> 4</td>
</tr>
<tr>
<td></td>
<td> home </td>
<td> 12</td>
</tr>
<tr>
<td></td>
<td> run  </td>
<td> 224</td>
</tr>
<tr>
<td></td>
<td> mnt  </td>
<td> 4</td>
</tr>
<tr>
<td></td>
<td> etc  </td>
<td> 6.5</td>
</tr>
<tr>
<td></td>
<td> var  </td>
<td> 920</td>
</tr>
<tr>
<td></td>
<td> root </td>
<td> 32</td>
</tr>
<tr>
<td></td>
<td> sbin </td>
<td> 4812</td>
</tr>
<tr>
<td></td>
<td> bin  </td>
<td> 4915</td>
</tr>
<tr>
<td></td>
<td> usr  </td>
<td> 508M</td>
</tr>
</tbody>
</table>


<br />See the output of the ``du`` command.<br /><br />


<p><img class='center' src="/images/lfs/lfs-disk-usage.png" title="Linux System Disk Usage" alt="Linux System Disk Usage" /></p>

<h2>Linux System Random Access Memory Usage</h2>


<p>The system has 1GB RAM. But only 31.5MB is used.</p>

<p><img class='center' src="/images/lfs/lfs-resource-usage.png" title="Linux System Resource Usage" alt="Linux System Resource Usage" /></p>

<p>Many wonder why they should go through the hassle of building a Linux system from scratch when they could just download an existing Linux distribution. However, there are several benefits of building Linux from sources.</p>

<p><blockquote><p>Building LFS teaches you about all that makes Linux tick, how things work together and depend on each other. And most importantly, how to customize it to your own tastes and needs.</p></blockquote></p>

<p>If you are wondering why you would want a highly secured system, just read any number of articles dealing with hackers and script kiddies breaking into systems and destroying them or stealing from them. Now, you can know the security hole, inspect the patches and fix it yourself immediately.</p>

<p><blockquote><p>You don&rsquo;t have to wait for someone else to provide a new binary package that (hopefully) fixes a security hole. Often, you never truly know whether a security hole is fixed or not unless you do it yourself.</p></blockquote></p>

<p>Thank you, Project Leader: Gerard Beekmans, Project Co-leader: Matthew Burgess and Project Co-leader: Bruce Dubbs of &lsquo;Linux From Scratch&rsquo;.</p>

<p>Visit &lsquo;Linux From Scratch&rsquo; today and experience the freedom and power. Don&rsquo;t forget to run the gcc tests using <code>make -k check</code> &ndash; <b>Approximate build time: 53.5 SBU !</b></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Compiling a Linux Kernel from Source Tarball]]></title>
    <link href="http://uw-freelancer.github.io/blog/compiling-the-linux-kernel-from-source/"/>
    <updated>2013-07-12T20:20:00+05:30</updated>
    <id>http://uw-freelancer.github.io/blog/compiling-the-linux-kernel-from-source</id>
    <content type="html"><![CDATA[<p>This is the third post about building a linux system from source files.</p>

<p>If you have rebooted your host after completing the steps described in the second post, first, mount the new system partition.</p>

<p>Our new system is on sdb disk.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>&lsquo;Mounting the new system&rsquo; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo su
</span><span class='line'><span class="nb">export </span><span class="nv">LFS</span><span class="o">=</span>/mnt/lfs
</span><span class='line'>mount -v -t ext3 /dev/sdb <span class="nv">$LFS</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img class='center' src="/images/lfs/mounting-the-system.png" title="Mounting the system filesystem" alt="Mounting the system filesystem" /></p>

<h2>Mounting and Populating Device (Virtual) Filesystem</h2>


<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>&lsquo;Mounting Dev Filesystem&rsquo; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mount -v &amp;mdash;bind /dev <span class="nv">$LFS</span>/dev
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>Mounting Virtual Kernel Filesystems</h2>


<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>&lsquo;Mounting Virtual Kernel Filesystems&rsquo; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mount -vt devpts devpts <span class="nv">$LFS</span>/dev/pts
</span><span class='line'>mount -vt proc proc <span class="nv">$LFS</span>/proc
</span><span class='line'>mount -vt sysfs sysfs <span class="nv">$LFS</span>/sys
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img class='center' src="/images/lfs/mounting-virtual-kernel-filesystems.png" title="Mounting Virtual Kernel Filesystems" alt="Mounting Virtual Kernel Filesystems" /></p>

<h2>Chroot to New System and Compile the Kernel</h2>


<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>&lsquo;Chrooting into new System&rsquo; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>chroot &amp;ldquo;<span class="nv">$LFS</span>&amp;rdquo; /usr/bin/env -i <span class="se">\&lt;</span>/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;HOME<span class="o">=</span>/root <span class="nv">TERM</span><span class="o">=</span><span class="s2">&quot;$TERM&quot;</span> <span class="nv">PS1</span><span class="o">=</span><span class="s1">&#39;\u:\w\$ &#39;</span> <span class="se">\</span>
</span><span class='line'><span class="nv">PATH</span><span class="o">=</span>/bin:/usr/bin:/sbin:/usr/sbin <span class="se">\</span>
</span><span class='line'>/bin/bash --login
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><blockquote><p>&lsquo;Make MrProper&rsquo; ensures that the kernel tree is absolutely clean. The kernel team recommends that this command be issued prior to each kernel compilation. Do not rely on the source tree being clean after un-tarring.</p></blockquote></p>

<p>Now run &lsquo;make LANG=en_US LC_ALL= menuconfig&rsquo; after &lsquo;make mrproper&rsquo;.</p>

<p><img class='center' src="/images/lfs/linux-kernel-configuration.png" title="Linux Kernel Configuration" alt="Linux Kernel Configuration" /></p>

<h2>Install the Fresh Linux Kernel in the Boot Directory</h2>


<p>Finally run the following command to install the Linux Kernel in the Boot directory.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>&lsquo;Install Kernel in Boot Directory&rsquo; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>make
</span><span class='line'>cp -v arch/x86/boot/bzImage /boot/vmlinuz-3.8.1-upeksha-7.3
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Now configure the Grub Bootloader and boot into the New Linux System.</p>

<p><a href="/blog/building-a-linux-system-from-scratch/" >Next: Booting and Logging into the New Linux System</a><br /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Building the System Software From Scratch]]></title>
    <link href="http://uw-freelancer.github.io/blog/building-the-system-software-from-scratch/"/>
    <updated>2013-07-01T17:00:00+05:30</updated>
    <id>http://uw-freelancer.github.io/blog/building-the-system-software-from-scratch</id>
    <content type="html"><![CDATA[<p>Various file systems exported by the kernel are used to communicate to and from the kernel itself. These file systems are virtual in that no disk space is used for them. The content of the file systems resides in memory. Begin by creating directories onto which the file systems will be mounted.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>&lsquo;Virtual Kernel FileSystems&rsquo; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mkdir -v <span class="nv">$LFS</span>/<span class="o">{</span>dev,proc,sys<span class="o">}</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;mount -vt devpts devpts <span class="nv">$LFS</span>/dev/pts
</span><span class='line'>mount -vt proc proc <span class="nv">$LFS</span>/proc
</span><span class='line'>mount -vt sysfs sysfs <span class="nv">$LFS</span>/sys
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>Dev File System</h3>


<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>&lsquo;Virtual Kernel FileSystems&rsquo; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mknod -m 600 <span class="nv">$LFS</span>/dev/console c 5 1
</span><span class='line'>mknod -m 666 <span class="nv">$LFS</span>/dev/null c 1 3&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;mount -v &amp;mdash;bind /dev <span class="nv">$LFS</span>/dev
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>Chroot into the System</h2>


<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>&lsquo;Chrooting to the System&rsquo; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>chroot &amp;ldquo;<span class="nv">$LFS</span>&amp;rdquo; /tools/bin/env -i <span class="se">\&lt;</span>/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;HOME<span class="o">=</span>/root <span class="se">\</span>
</span><span class='line'><span class="nv">TERM</span><span class="o">=</span><span class="s2">&quot;$TERM&quot;</span> <span class="se">\</span>
</span><span class='line'><span class="nv">PS1</span><span class="o">=</span><span class="s1">&#39;\u:\w\$ &#39;</span> <span class="se">\</span>
</span><span class='line'><span class="nv">PATH</span><span class="o">=</span>/bin:/usr/bin:/sbin:/usr/sbin:/tools/bin <span class="se">\</span>
</span><span class='line'>/tools/bin/bash --login +h
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><code>-i</code> option will clear all environment variables of the chroot environment. Then &lsquo;HOME&rsquo;, &lsquo;TERM&rsquo;, &lsquo;PS1&rsquo; and &lsquo;PATH&rsquo; variables are set again.</p>

<p><blockquote><p>Notice that &lsquo;/tools/bin&rsquo; comes last in the PATH. This means that a temporary tool will no longer be used once its final version is installed. This occurs when the shell does not “remember” the locations of executed binaries—for this reason, hashing is switched off by passing the &lsquo;+h&rsquo; option to bash.</p></blockquote></p>

<h2>Install the System Software from Source</h2>


<p>The following list of programs needs to be installed.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>&lsquo;System Software List&rsquo; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Linux-3.8.1 API Headers
</span><span class='line'>Man-pages-3.47
</span><span class='line'>Glibc-2.17
</span><span class='line'>Zlib-1.2.7
</span><span class='line'>File-5.13
</span><span class='line'>Binutils-2.23.1
</span><span class='line'>GMP-5.1.1
</span><span class='line'>MPFR-3.1.1
</span><span class='line'>MPC-1.0.1
</span><span class='line'>GCC-4.7.2
</span><span class='line'>Sed-4.2.2
</span><span class='line'>Bzip2-1.0.6
</span><span class='line'>Pkg-config-0.28
</span><span class='line'>Ncurses-5.9
</span><span class='line'>Util-linux-2.22.2
</span><span class='line'>Psmisc-22.20
</span><span class='line'>Procps-ng-3.3.6
</span><span class='line'>E2fsprogs-1.42.7
</span><span class='line'>Shadow-4.1.5.1
</span><span class='line'>Coreutils-8.21
</span><span class='line'>Iana-Etc-2.30
</span><span class='line'>M4-1.4.16
</span><span class='line'>Bison-2.7
</span><span class='line'>Grep-2.14
</span><span class='line'>Readline-6.2
</span><span class='line'>Bash-4.2
</span><span class='line'>Libtool-2.4.2
</span><span class='line'>GDBM-1.10
</span><span class='line'>Inetutils-1.9.1
</span><span class='line'>Perl-5.16.2
</span><span class='line'>Autoconf-2.69
</span><span class='line'>Automake-1.13.1
</span><span class='line'>Diffutils-3.2
</span><span class='line'>Gawk-4.0.2
</span><span class='line'>Findutils-4.4.2
</span><span class='line'>Flex-2.5.37
</span><span class='line'>Gettext-0.18.2
</span><span class='line'>Groff-1.22.2
</span><span class='line'>Xz-5.0.4
</span><span class='line'>GRUB-2.00
</span><span class='line'>Less-451
</span><span class='line'>Gzip-1.5
</span><span class='line'>IPRoute2-3.8.0
</span><span class='line'>Kbd-1.15.5
</span><span class='line'>Kmod-12
</span><span class='line'>Libpipeline-1.2.2
</span><span class='line'>Make-3.82
</span><span class='line'>Man-DB-2.6.3
</span><span class='line'>Patch-2.7.1
</span><span class='line'>Sysklogd-1.5
</span><span class='line'>Sysvinit-2.88dsf
</span><span class='line'>Tar-1.26
</span><span class='line'>Texinfo-5.0
</span><span class='line'>Udev-197
</span><span class='line'>Vim-7.3
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Now we have all System Software installed. Next we should compile the kernel. See <a href="/blog/compiling-the-linux-kernel-from-source/" >Compiling a Linux Kernel From Source</a> post.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Building the Host Independant Toolchain]]></title>
    <link href="http://uw-freelancer.github.io/blog/building-the-host-independant-toolchain/"/>
    <updated>2013-06-14T12:00:00+05:30</updated>
    <id>http://uw-freelancer.github.io/blog/building-the-host-independant-toolchain</id>
    <content type="html"><![CDATA[<p>We are going to build a Linux Kernel based System with GNU Components by configuring, compiling and installing source tarballs. Mount a new ext3 disk on <code>/mnt/lfs</code> without partitioning. Create <code>sources</code> directory.</p>

<p>Most of these steps are described in &lsquo;Linux From Scratch 7.3&rsquo; book. But I will describe you how I build this system on an Ubuntu host with further explanations where applicable.</p>

<h2>Finding the New Disk, Formatting and Mouting</h2>


<p>Run <code>sudo lshw</code>. Find your disk logical name. e.g. I found my disk at &lsquo;core&rsquo; > &lsquo;pci&rsquo; > &lsquo;storage&rsquo; > &lsquo;disk2&rsquo;.
<code>logical name: /dev/sdc</code></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>&lsquo;Static IP Assignment for eth1 (/etc/network/interfaces)&rsquo; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo su
</span><span class='line'>mke2fs -jv /dev/sdc
</span><span class='line'>mount -v -t ext3 /dev/sdc /mnt/lfs
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img class='center' src="/images/kernel/mounting-the-new-disk.png" title="Mounting the New Disk" alt="Mounting the New Disk" /></p>

<h2>GNU BinUtils 2.23.1 Installation</h2>


<p>The GNU Binutils are a collection of binary tools. The main ones are:</p>

<p>ld &ndash; the GNU linker.<br /><br />
as &ndash; the GNU assembler.</p>

<p><a href="http://www.gnu.org/software/binutils/">http://www.gnu.org/software/binutils/</a></p>

<p>Download the &lsquo;GNU BinUtils&rsquo; (21.5MB) using <code>wget</code> into <code>/mnt/lfs/sources</code>.
Untar using <code>tar -jxvf binutils-2.23.1.tar.bz2</code>. j option is for bzip2 archives. (154MB)</p>

<p>run the <code>configure</code> command with the relevant arguments. Now <code>make</code>.</p>

<p>The time to compile BinUtils is called 1SBU. For me 1SBU ~ 2.5min.</p>

<p>&lsquo;binutils-build&rsquo; ~ 85MB.</p>

<p>Time to install. <code>make install</code>. This will install the BinUtils in &lsquo;tools&rsquo; directory.</p>

<h2>GNU Compiler Collection 4.7.2 Installation</h2>


<p>The GNU Compiler Collection includes front ends for C, C++, Objective-C, Fortran, Java, Ada, and Go, as well as libraries for these languages (libstdc++, libgcj,&hellip;). GCC was originally written as the compiler for the GNU operating system.</p>

<p><a href="http://gcc.gnu.org/">http://gcc.gnu.org/</a></p>

<h3>The GNU Multi Precision Library (MPC) 5.1.1</h3>


<p><a href="http://gmplib.org/">http://gmplib.org/</a></p>

<p>Arithmetic without limitations &ndash; The GNU Multiple Precision Arithmetic Library</p>

<p>GMP is a free library for arbitrary precision arithmetic, operating on signed integers, rational numbers, and floating point numbers. There is no practical limit to the precision except the ones implied by the available memory in the machine GMP runs on. GMP has a rich set of functions, and the functions have a regular interface.</p>

<p><a href="ftp://ftp.gmplib.org/pub/gmp-5.1.1/gmp-5.1.1.tar.xz">ftp://ftp.gmplib.org/pub/gmp-5.1.1/gmp-5.1.1.tar.xz</a></p>

<h3>The GNU MPFR Library 3.1.1</h3>


<p><a href="http://www.mpfr.org/">http://www.mpfr.org/</a></p>

<p>MPFR is based on the GMP multiple-precision library (MPC).</p>

<p>The MPFR library is a C library for multiple-precision floating-point computations with correct rounding. The main goal of MPFR is to provide a library for multiple-precision floating-point computation which is both efficient and has a well-defined semantics. It copies the good ideas from the ANSI/IEEE-754 standard for double-precision floating-point arithmetic (53-bit significand).</p>

<p><a href="http://www.mpfr.org/mpfr-3.1.1/mpfr-3.1.1.tar.xz">http://www.mpfr.org/mpfr-3.1.1/mpfr-3.1.1.tar.xz</a></p>

<h3>GNU MPC 1.0.1</h3>


<p><a href="http://www.multiprecision.org/">http://www.multiprecision.org/</a></p>

<p>Gnu Mpc is a C library for the arithmetic of complex numbers with arbitrarily high precision and correct rounding of the result. It extends the principles of the IEEE-754 standard for fixed precision real floating point numbers to complex numbers, providing well-defined semantics for every operation. At the same time, speed of operation at high precision is a major design goal.</p>

<p><a href="http://www.multiprecision.org/mpc/download/mpc-1.0.1.tar.gz">http://www.multiprecision.org/mpc/download/mpc-1.0.1.tar.gz</a></p>

<h3>IEEE 754</h3>


<p>IEEE Standard for Floating-Point Arithmetic (IEEE 754).</p>

<p><img class='center' src="/images/kernel/ieee-logo.png" title="IEEE 754" alt="IEEE 754" /></p>

<p>The IEEE Standard for Floating-Point Arithmetic (IEEE 754) is a technical standard for floating-point computation established in 1985 by the Institute of Electrical and Electronics Engineers (IEEE). Many hardware floating point units use the IEEE 754 standard. The current version, IEEE 754-2008 published in August 2008, includes nearly all of the original IEEE 754-1985 standard and the IEEE Standard for Radix-Independent Floating-Point Arithmetic (IEEE 854-1987). The international standard ISO/IEC/IEEE 60559:2011 (with identical content to IEEE 754) has been approved for adoption through JTC1/SC 25 under the ISO/IEEE PSDO Agreement and published.</p>

<p>GNU MPC and GNU MPFR are base on IEEE 754 Standard.</p>

<p><a href="https://en.wikipedia.org/wiki/IEEE_floating_point">https://en.wikipedia.org/wiki/IEEE_floating_point</a></p>

<h3>Linux Kernel 3.8.1</h3>


<p><a href="https://www.kernel.org/">https://www.kernel.org/</a></p>

<p>The Linux API Headers expose the kernel&rsquo;s API for use by Glibc.</p>

<p><img class='center' src="/images/kernel/linux-logo.png" title="Linux Kernel" alt="Linux Kernel" /></p>

<p>The Linux kernel needs to expose an Application Programming Interface (API) for the system&rsquo;s C library (Glibc in LFS) to use. This is done by way of sanitizing various C header files that are shipped in the Linux kernel source tarball.</p>

<p><a href="http://www.kernel.org/pub/linux/kernel/v3.x/linux-3.8.1.tar.xz">http://www.kernel.org/pub/linux/kernel/v3.x/linux-3.8.1.tar.xz</a></p>

<h3>The GNU C Library 2.17</h3>


<p><a href="http://www.gnu.org/software/libc/">http://www.gnu.org/software/libc/</a></p>

<p>Any Unix-like operating system needs a C library: the library which defines the &ldquo;system calls&rdquo; and other basic facilities such as open, malloc, printf, exit&hellip;</p>

<p>The GNU C Library is used as the C library in the GNU systems and most systems with the Linux kernel.</p>

<p>The GNU C Library is primarily designed to be a portable and high performance C library. It follows all relevant standards including ISO C11 and POSIX.1-2008. It is also internationalized and has one of the most complete internationalization interfaces known.</p>

<p><a href="http://ftp.gnu.org/gnu/glibc/glibc-2.17.tar.xz">http://ftp.gnu.org/gnu/glibc/glibc-2.17.tar.xz</a></p>

<h3>Second Pass - BinUtils and GCC</h3>


<p>After installing above programs, BinUtils and GCC needs another pass. Recompile and Reinstall both.</p>

<h3>Toolchain Remaining Tools</h3>


<p>Install the rest of the tools required to actually build the System From Source Tarballs.</p>

<p>Tcl 8.6.0<br />
Expect 5.45<br />
DejaGNU 1.5<br />
Check 0.9.9<br />
Ncurses 5.9<br />
Bash 4.2<br />
Bzip2 1.0.6<br />
Coreutils 8.21<br />
Diffutils 3.2<br />
File 5.13<br />
Findutils 4.4.2<br />
Gawk 4.0.2<br />
Gettext 0.18.2<br />
Grep 2.14<br />
Gzip 1.5<br />
M4 1.4.16<br />
Make 3.82<br />
Patch 2.7.1<br />
Perl 5.16.2<br />
Sed 4.2.2<br />
Tar 1.26<br />
Texinfo 5.0<br />
Xz 5.0.4<br /><br /></p>

<p>Next Read the post about <a href="/blog/building-the-system-software-from-scratch/" >Building the System Software From Scratch</a>.<br /></p>
]]></content>
  </entry>
  
</feed>
